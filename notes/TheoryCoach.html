<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TheoryCoach</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="theorycoach-algorithmus">TheoryCoach Algorithmus</h1>
<h3 id="schritt-1-berechnung-von-kombinationen">Schritt 1: Berechnung von Kombinationen</h3>
<p>Alle mögliche Kombinationen von Wertigkeiten berechnen.<br>
<strong>Beispiel</strong>
Für die Klasse A – Zusatzstoff: 10 Fragen mit Wertigkeiten [2, 3, 4, 5]. Wir wollen alle möglichen Kombinationen der Wertigkeiten in 10-Tupeln, mit Wiederholungen, Reihenfolge egal:<br>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>4</mn><mo separator="true">;</mo><mi>k</mi><mo>=</mo><mn>1</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">n = 4; k = 10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.69444em;"></span><span class="strut bottom" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="base"><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathrm">4</span><span class="mpunct">;</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span></span></span></span>
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mrow><mi>n</mi><mo>+</mo><mi>k</mi><mo>−</mo><mn>1</mn></mrow><mrow><mi>k</mi></mrow></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mrow><mn>4</mn><mo>+</mo><mn>1</mn><mn>0</mn><mo>−</mo><mn>1</mn></mrow><mrow><mn>4</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mfrac linethickness="0px"><mrow><mn>1</mn><mn>3</mn></mrow><mrow><mn>1</mn><mn>0</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mo>=</mo><mfrac><mrow><mn>1</mn><mn>3</mn><mo>!</mo></mrow><mrow><mn>1</mn><mn>0</mn><mo>!</mo><mspace width="0.16667em"></mspace><mo>(</mo><mn>1</mn><mn>3</mn><mo>−</mo><mn>1</mn><mn>0</mn><mo>)</mo><mo>!</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>1</mn><mn>3</mn><mo>!</mo></mrow><mrow><mn>1</mn><mn>0</mn><mo>!</mo><mspace width="0.16667em"></mspace><mn>3</mn><mo>!</mo></mrow></mfrac><mo>=</mo><mn>2</mn><mn>8</mn><mn>6</mn></mrow><annotation encoding="application/x-tex">\binom{n+k-1}{k} = \binom{4+10-1}{4} = \binom{13}{10} = \frac{13!}{10!\,(13-10)!}=\frac{13!}{10!\,3!}= 286</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 1.45em;"></span><span class="strut bottom" style="height: 2.40003em; vertical-align: -0.95003em;"></span><span class="base"><span class="mord"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit" style="margin-right: 0.03148em;">k</span></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathit">n</span><span class="mbin">+</span><span class="mord mathit" style="margin-right: 0.03148em;">k</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">)</span></span></span><span class="mrel">=</span><span class="mord"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">4</span></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">4</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">)</span></span></span><span class="mrel">=</span><span class="mord"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size3">(</span></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.32144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"></span></span></span></span><span class="mclose delimcenter" style="top: 0em;"><span class="delimsizing size3">)</span></span></span><span class="mrel">=</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mclose">!</span><span class="mopen"><span class="mspace thinspace"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">3</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mclose">)</span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">3</span><span class="mclose">!</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mrel">=</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.37144em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mclose">!</span><span class="mord mathrm"><span class="mspace thinspace"></span><span class="mord mathrm">3</span></span><span class="mclose">!</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathrm">1</span><span class="mord mathrm">3</span><span class="mclose">!</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mord mathrm">8</span><span class="mord mathrm">6</span></span></span></span></span></span>
Es gibt 286 verschiedene Kombinationen von Wertigkeiten. Daraus müssen jetzt noch die herausgefiltert werden wo die Gesamtpunktzahl 33 ist. Beispielcode in Elixir:</p>
<pre class=" language-elixir"><code class="prism  language-elixir"><span class="token keyword">defmodule</span> TheoryCoach<span class="token punctuation">.</span>Combinations <span class="token keyword">do</span>
  <span class="token keyword">def</span> combination<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token attr-name">do:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token keyword">def</span> combination<span class="token punctuation">(</span>_<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token attr-name">do:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">def</span> combination<span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token punctuation">[</span>h<span class="token operator">|</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">)</span> <span class="token keyword">do</span>
    <span class="token punctuation">(</span><span class="token keyword">for</span> l <span class="token operator">&lt;-</span> combination<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token attr-name">do:</span> <span class="token punctuation">[</span>h<span class="token operator">|</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">++</span> combination<span class="token punctuation">(</span>n<span class="token punctuation">,</span> t<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
 
s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
combinations <span class="token operator">=</span> TheoryCoach<span class="token punctuation">.</span>Combinations<span class="token punctuation">.</span>combination<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
Enum<span class="token punctuation">.</span>each<span class="token punctuation">(</span>combinations<span class="token punctuation">,</span> <span class="token keyword">fn</span> x <span class="token operator">-&gt;</span> IO<span class="token punctuation">.</span>inspect x <span class="token keyword">end</span><span class="token punctuation">)</span>
IO<span class="token punctuation">.</span>puts<span class="token punctuation">(</span><span class="token string">"Total combinations: <span class="token interpolation"><span class="token delimiter punctuation">#{</span>length<span class="token punctuation">(</span>combinations<span class="token punctuation">)</span><span class="token delimiter punctuation">}</span></span>"</span><span class="token punctuation">)</span>
filtered <span class="token operator">=</span> Enum<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>combinations<span class="token punctuation">,</span> <span class="token keyword">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Enum<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">fn</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> acc<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> y <span class="token operator">+</span> acc <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">33</span> <span class="token keyword">end</span><span class="token punctuation">)</span>
Enum<span class="token punctuation">.</span>each<span class="token punctuation">(</span>filtered<span class="token punctuation">,</span> <span class="token keyword">fn</span> x <span class="token operator">-&gt;</span> IO<span class="token punctuation">.</span>inspect x <span class="token keyword">end</span><span class="token punctuation">)</span>
IO<span class="token punctuation">.</span>puts<span class="token punctuation">(</span><span class="token string">"Total combinations with sum of 33: <span class="token interpolation"><span class="token delimiter punctuation">#{</span>length<span class="token punctuation">(</span>filtered<span class="token punctuation">)</span><span class="token delimiter punctuation">}</span></span>"</span><span class="token punctuation">)</span>
</code></pre>
<p>Output:</p>
<pre><code>...
[4, 4, 4, 4, 4, 4, 5, 5, 5, 5]
[4, 4, 4, 4, 4, 5, 5, 5, 5, 5]
[4, 4, 4, 4, 5, 5, 5, 5, 5, 5]
[4, 4, 4, 5, 5, 5, 5, 5, 5, 5]
[4, 4, 5, 5, 5, 5, 5, 5, 5, 5]
[4, 5, 5, 5, 5, 5, 5, 5, 5, 5]
[5, 5, 5, 5, 5, 5, 5, 5, 5, 5]
Total combinations: 286
[2, 2, 2, 2, 2, 3, 5, 5, 5, 5]
[2, 2, 2, 2, 2, 4, 4, 5, 5, 5]
[2, 2, 2, 2, 3, 3, 4, 5, 5, 5]
[2, 2, 2, 2, 3, 4, 4, 4, 5, 5]
[2, 2, 2, 2, 4, 4, 4, 4, 4, 5]
[2, 2, 2, 3, 3, 3, 3, 5, 5, 5]
[2, 2, 2, 3, 3, 3, 4, 4, 5, 5]
[2, 2, 2, 3, 3, 4, 4, 4, 4, 5]
[2, 2, 2, 3, 4, 4, 4, 4, 4, 4]
[2, 2, 3, 3, 3, 3, 3, 4, 5, 5]
[2, 2, 3, 3, 3, 3, 4, 4, 4, 5]
[2, 2, 3, 3, 3, 4, 4, 4, 4, 4]
[2, 3, 3, 3, 3, 3, 3, 3, 5, 5]
[2, 3, 3, 3, 3, 3, 3, 4, 4, 5]
[2, 3, 3, 3, 3, 3, 4, 4, 4, 4]
[3, 3, 3, 3, 3, 3, 3, 3, 4, 5]
[3, 3, 3, 3, 3, 3, 3, 4, 4, 4]
Total combinations with sum of 33: 17
</code></pre>
<p>Es gibt folglich lediglich 17 verschiedene mögliche Kombination an Wertigkeiten. Hier könnte man jetzt auch noch manuell Kombinationen rausfiltern. Vielleicht machen 4x<strong>5</strong>, 6x<strong>4</strong> oder 8x<strong>3</strong> wenig Sinn in der Klasse.</p>
<h3 id="schritt-2-auswahl-von-fragen">Schritt 2: Auswahl von Fragen</h3>
<ol>
<li>Zufällige Auswahl einer dieser möglichen Kombinationen, bezeichnet mit <code>M</code></li>
<li>Starte mit <code>max_count = 0</code>, wobei <code>max_count</code> bezeichnet wie oft die Fragen maximal bereits verwendet sein dürfen um ausgewählt zu werden.</li>
<li>Starte bei Kategorie <strong>2.1</strong>. Erste Frage mit <code>count &lt;= max_count</code> wird genommen, und geschaut ob die Wertigkeit dieser Frage in <code>M</code> vorhanden ist.
<ul>
<li>Wenn ja, wird diese Frage der Ergebnismenge <code>K</code> hinzugefügt, und das Wertigkeitselement aus <code>M</code> entfernt.</li>
<li>Wenn nein, schaue die zweite, dritte, usw. Frage an, bis die Kategorie durchgearbeitet wurde (dann wurden in dieser Kategorie keine Fragen mehr mit <code>count &lt;= max_count</code> gefunden.</li>
</ul>
</li>
<li>Gehe zur nächsten Kategorie, und wiederhole das Verfahren.</li>
<li>So lange wiederholen bis keine Fragen mehr gefunden werden. Erhöhe <code>max_count</code> um 1 und wieder von vorne anfangen.</li>
<li>So lange wiederholen bis in <code>K</code> 10 Fragen stehen.</li>
<li>Am Ende, berechne einen Gesamtscore, der die Addition aller <code>counts</code> der einzelnen Fragen darstellt, also wie häufig diese bereits verwendet wurden:
<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><mi>K</mi><mo>[</mo><mi>i</mi><mo>]</mo><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\sum_{i=0}^{n-1} K[i].count</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 1.80111em;"></span><span class="strut bottom" style="height: 3.07878em; vertical-align: -1.27767em;"></span><span class="base"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.80111em;"><span class="" style="top: -1.87233em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">i</span><span class="mrel mtight">=</span><span class="mord mathrm mtight">0</span></span></span></span><span class="" style="top: -3.05001em;"><span class="pstrut" style="height: 3.05em;"></span><span class=""><span class="mop op-symbol large-op">∑</span></span></span><span class="" style="top: -4.3em; margin-left: 0em;"><span class="pstrut" style="height: 3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">n</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.27767em;"></span></span></span></span><span class="mord mathit" style="margin-right: 0.07153em;">K</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">u</span><span class="mord mathit">n</span><span class="mord mathit">t</span></span></span></span></span></span></li>
</ol>
<h3 id="schritt-3-generierung-von-verschiedenen-fragebögen-und-vergleich">Schritt 3: Generierung von verschiedenen Fragebögen und Vergleich</h3>
<p>Das ganze könnte man jetzt für jede Kombination (also 17x) durchführen und am Ende die Gesamtscores vergleichen. Der mit dem niedrigsten Gesamtscore wäre dann der beste mögliche Fragebogen. Alternativ könnte man auch vorher schon arbiträr festlegen was ein “guter” Gesamtscore ist (bspw. &lt;= 15), und dann aufhören sobald man einen Fragebogen mit Gesamtscore &lt;= 15 hat.</p>
</div>
</body>

</html>
